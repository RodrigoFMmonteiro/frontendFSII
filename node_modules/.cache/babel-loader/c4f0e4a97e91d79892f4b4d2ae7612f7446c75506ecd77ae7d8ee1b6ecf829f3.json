{"ast":null,"code":"import _slicedToArray from\"C:/Users/rodri/formulario-pesquisa/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef}from\"react\";import{Form,Container}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function BarraBusca(_ref){var placeHolder=_ref.placeHolder,dados=_ref.dados,campoChave=_ref.campoChave,campoBusca=_ref.campoBusca,funcaoSelecao=_ref.funcaoSelecao,valor=_ref.valor;var inputBusca=useRef();var _useState=useState(valor?valor:\"\"),_useState2=_slicedToArray(_useState,2),termoBusca=_useState2[0],setTermoBusca=_useState2[1];var _useState3=useState(dados),_useState4=_slicedToArray(_useState3,2),dadosLista=_useState4[0],setDadosLista=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),itemSelecionado=_useState6[0],setItemSlecionado=_useState6[1];function filterResult(){setDadosLista(dados.filter(function(item){return termoBusca.length>1?item[campoBusca].toLowerCase().includes(termoBusca.toLowerCase()):false;}));var componenteResult=document.querySelector('[data-result]');if(dadosLista.length>0){componenteResult.style.display='block';}else{componenteResult.style.display='none';}}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form.Control,{id:\"barra\",type:\"text\",ref:inputBusca,placeholder:placeHolder,value:termoBusca,required:true,onChange:function onChange(e){setTermoBusca(e.target.value.toLowerCase());filterResult();if(!itemSelecionado){e.target.setAttribute('aria-invalid',true);e.target.setCustomValidity('erro');}else{e.target.removeAttribute('aria-invalid');e.target.setCustomValidity(\"\");}}}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-x-square-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z\",onAuxClick:function onAuxClick(){setTermoBusca('');filterResult();inputBusca.current.setAttribute('aria-invalid',true);inputBusca.current.setCustomValidity(\"erro\");}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"resultados\",children:/*#__PURE__*/_jsx(\"ul\",{\"data-result\":true,children:dadosLista.map(function(item){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){setTermoBusca(item[campoBusca]);setItemSlecionado(true);funcaoSelecao(item);setItemSlecionado(false);funcaoSelecao({});inputBusca.current.setCustomValidity(\"\");var componenteResult=document.querySelector('[data-result]');componenteResult.style.display=\"none\";},children:item[campoChave]+'-'+item[campoBusca]},item[campoChave]);})})})]});}","map":{"version":3,"names":["useState","useRef","Form","Container","jsx","_jsx","jsxs","_jsxs","BarraBusca","_ref","placeHolder","dados","campoChave","campoBusca","funcaoSelecao","valor","inputBusca","_useState","_useState2","_slicedToArray","termoBusca","setTermoBusca","_useState3","_useState4","dadosLista","setDadosLista","_useState5","_useState6","itemSelecionado","setItemSlecionado","filterResult","filter","item","length","toLowerCase","includes","componenteResult","document","querySelector","style","display","children","Control","id","type","ref","placeholder","value","required","onChange","e","target","setAttribute","setCustomValidity","removeAttribute","xmlns","width","height","fill","className","viewBox","d","onAuxClick","current","map","onClick"],"sources":["C:/Users/rodri/formulario-pesquisa/src/BarraBusca.js"],"sourcesContent":["import { useState, useRef } from \"react\";\r\nimport { Form, Container } from \"react-bootstrap\";\r\n\r\n\r\nexport default function BarraBusca({placeHolder, dados, campoChave, campoBusca, funcaoSelecao, valor}){\r\n    const inputBusca = useRef();\r\n    const [termoBusca, setTermoBusca] = useState(valor?valor: \"\");\r\n    const [dadosLista, setDadosLista] = useState(dados);\r\n    const [itemSelecionado, setItemSlecionado] = useState(false);\r\n    \r\n\r\n    function filterResult(){\r\n        setDadosLista(dados.filter((item)=>{\r\n            return termoBusca.length > 1 ? item[campoBusca].toLowerCase().includes(termoBusca.toLowerCase()):false\r\n        }));\r\n        let componenteResult = document.querySelector('[data-result]');\r\n        if (dadosLista.length > 0){\r\n            componenteResult.style.display='block';\r\n        }\r\n        else {\r\n            componenteResult.style.display='none';\r\n        }\r\n    }\r\n\r\n    return(\r\n\r\n        <Container>\r\n\r\n            <div>\r\n            <Form.Control\r\n                id=\"barra\"\r\n                type=\"text\"\r\n                ref={inputBusca}\r\n                placeholder={placeHolder}\r\n                value={termoBusca}\r\n                required\r\n                onChange={e=>{\r\n                    setTermoBusca(e.target.value.toLowerCase());\r\n                    filterResult();\r\n                    if(!itemSelecionado){\r\n                        e.target.setAttribute('aria-invalid',true);\r\n                        e.target.setCustomValidity('erro');\r\n                    }\r\n                    else{\r\n                        e.target.removeAttribute('aria-invalid');\r\n                        e.target.setCustomValidity(\"\");\r\n                    }\r\n                }}>\r\n            </Form.Control>\r\n\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" \r\n                width=\"16\" \r\n                height=\"16\" \r\n                fill=\"currentColor\" \r\n                className=\"bi bi-x-square-fill\" \r\n                viewBox=\"0 0 16 16\">\r\n                <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm3.354 4.646L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 1 1 .708-.708z\"\r\n                onAuxClick={()=>{\r\n                    setTermoBusca('');\r\n                    filterResult();\r\n                    inputBusca.current.setAttribute('aria-invalid',true);\r\n                    inputBusca.current.setCustomValidity(\"erro\");\r\n                }}/>\r\n            </svg>\r\n            </div>\r\n            <div className=\"resultados\">\r\n                <ul data-result>\r\n                    {\r\n                        dadosLista.map(item => {\r\n                            return <li key={item[campoChave]}\r\n                                   onClick={()=>{\r\n                                        setTermoBusca(item[campoBusca]);\r\n                                        setItemSlecionado(true);\r\n                                        funcaoSelecao(item);\r\n                                        setItemSlecionado(false)\r\n                                        funcaoSelecao({})\r\n                                        inputBusca.current.setCustomValidity(\"\");\r\n                                        let componenteResult = document.querySelector('[data-result]');\r\n                                        componenteResult.style.display=\"none\";\r\n                                   }}>\r\n                                        {item[campoChave] + '-' + item[campoBusca]} \r\n                                \r\n                                    </li>\r\n                        })\r\n                    }\r\n\r\n                </ul>\r\n\r\n            </div>\r\n\r\n        </Container>\r\n    );\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}